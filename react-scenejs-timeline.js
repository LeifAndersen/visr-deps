/*! For license information please see react-scenejs-timeline.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(()=>(()=>{var e={440:e=>{e.exports=function(){return this.React}()},32:e=>{e.exports=function(){return this.ReactDOM}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{default:()=>Qe});var e=n(440);function t(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map((function(t){return t.split(" ").map((function(t){return t?""+e+t:""})).join(" ")})).join(" ")}function i(e,t){return function(n){n&&(e[t]=n)}}function o(e,t,n){return function(r){r&&(e[t][n]=r)}}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var s="undefined",l=("undefined"==typeof window||a(window),("undefined"==typeof document?"undefined":a(document))!==s&&document,['"',"'",'\\"',"\\'"]);function c(e){return a(e)===s}function p(e){return e&&"object"===a(e)}function u(e,t,n,r){for(var i=n;i<r;++i){var o=t[i].trim();if(o===e)return i;var a=i;if("("===o?a=u(")",t,i+1,r):l.indexOf(o)>-1&&(a=u(o,t,i+1,r)),-1===a)break;i=a}return-1}function f(e){return function(e,t){for(var n=new RegExp("(\\s*"+(t||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),r=e.split(n).filter(Boolean),i=r.length,o=[],a=[],s=0;s<i;++s){var c=r[s].trim(),p=s;if("("===c)p=u(")",r,s+1,i);else{if(")"===c)throw new Error("invalid format");if(l.indexOf(c)>-1)p=u(c,r,s+1,i);else if(c===t){a.length&&(o.push(a.join("")),a=[]);continue}}-1===p&&(p=i-1),a.push(r.slice(s,p+1).join("")),s=p}return a.length&&o.push(a.join("")),o}(e,",")}function m(e,t,n){void 0===n&&(n=-1);for(var r=e.length,i=0;i<r;++i)if(t(e[i],i,e))return i;return n}function d(e,t,n,r){e.addEventListener(t,n,r)}function h(e,t,n){e.removeEventListener(t,n)}var y=n(32);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e){return void 0===e}var b=function(){function e(){this.options={},this._eventHandler={}}var t=e.prototype;return t.trigger=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._eventHandler[e]||[],o=i.length>0;if(!o)return!0;var a=n[0]||{},s=n.slice(1);i=i.concat();var l=!1;a.eventType=e,a.stop=function(){l=!0},a.currentTarget=this;var c=[a];return s.length>=1&&(c=c.concat(s)),i.forEach((function(e){e.apply(t,c)})),!l},t.once=function(e,t){var n=this;if("object"===v(e)&&g(t)){var r=e;for(var i in r)this.once(i,r[i]);return this}return"string"==typeof e&&"function"==typeof t&&this.on(e,(function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];t.apply(n,i),n.off(e,r)})),this},t.hasOn=function(e){return!!this._eventHandler[e]},t.on=function(e,t){if("object"===v(e)&&g(t)){var n=e;for(var r in n)this.on(r,n[r]);return this}if("string"==typeof e&&"function"==typeof t){var i=this._eventHandler[e];g(i)&&(this._eventHandler[e]=[],i=this._eventHandler[e]),i.push(t)}return this},t.off=function(e,t){var n,r;if(g(e))return this._eventHandler={},this;if(g(t)){if("string"==typeof e)return delete this._eventHandler[e],this;var i=e;for(var o in i)this.off(o,i[o]);return this}var a=this._eventHandler[e];if(a){var s=0;try{for(var l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),c=l.next();!c.done;c=l.next()){if(c.value===t){a.splice(s,1);break}s++}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}return this},e.VERSION="2.2.2",e}();const x=b;function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}var E=function(e,t){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},E(e,t)},w=function(e,t){return function(e,t){function n(e){if(e&&"object"===k(e)){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var n,o=String(e);return(n=r[o.toLowerCase()])?n:(n=i[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"===k(e)){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var o;if(o=r[t.toLowerCase()])return o===n;if(o=i[t.toLowerCase()])return o===n}else if("number"==typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var a=t.names=t.title={};for(o in r)a[r[o]]=o;for(var s in i)r[s]=i[s]}(t={exports:{}},t.exports),t.exports}(),T=(w.code,w.codes,w.aliases,w.names);function S(e){return Array.isArray(e)}function P(e){return"string"===k(e)}function A(e,t,n,r){e.addEventListener(t,n,r)}w.title;var C,D={"+":"plus","left command":"meta","right command":"meta"},I={shift:1,ctrl:2,alt:3,meta:4};function O(e){var t=T[e]||"";for(var n in D)t=t.replace(n,D[n]);return t.replace(/\s/g,"")}function N(e){var t=e.slice();return t.sort((function(e,t){return(I[e]||5)-(I[t]||5)})),t}const j=function(e){function t(t){void 0===t&&(t=window);var n=e.call(this)||this;return n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n.clear=function(){return n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n},n.keydownEvent=function(e){n.triggerEvent("keydown",e)},n.keyupEvent=function(e){n.triggerEvent("keyup",e)},A(t,"blur",n.clear),A(t,"keydown",n.keydownEvent),A(t,"keyup",n.keyupEvent),n}!function(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e);var n=t.prototype;return Object.defineProperty(t,"global",{get:function(){return C||(C=new t)},enumerable:!0,configurable:!0}),n.keydown=function(e,t){return this.addEvent("keydown",e,t)},n.offKeydown=function(e,t){return this.removeEvent("keydown",e,t)},n.offKeyup=function(e,t){return this.removeEvent("keyup",e,t)},n.keyup=function(e,t){return this.addEvent("keyup",e,t)},n.addEvent=function(e,t,n){return S(t)?this.on(e+"."+N(t).join("."),n):P(t)?this.on(e+"."+t,n):this.on(e,t),this},n.removeEvent=function(e,t,n){return S(t)?this.off(e+"."+N(t).join("."),n):P(t)?this.off(e+"."+t,n):this.off(e,t),this},n.triggerEvent=function(e,t){this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey;var n=O(t.keyCode),r={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:t,keyCode:t.keyCode,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey};this.trigger(e,r),this.trigger(e+"."+n,r);var i=function(e,t){void 0===t&&(t=O(e.keyCode));var n=[e.shiftKey&&"shift",e.ctrlKey&&"ctrl",e.altKey&&"alt",e.metaKey&&"meta"];return-1===n.indexOf(t)&&n.push(t),n.filter(Boolean)}(t,n);i.length>1&&this.trigger(e+"."+i.join("."),r)},t}(x);var K=function(){return K=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},K.apply(this,arguments)};function M(e,t,n,r){var i=W(e),o=W(t),a=W(r);return _(R(r[0],B(i,a)),R(r[0],B(o,a)),n[0])}function z(e){return e.touches?Y(e.touches):[F(e)]}function _(e,t,n){var r=e.clientX,i=e.clientY;return{clientX:r,clientY:i,deltaX:r-t.clientX,deltaY:i-t.clientY,distX:r-n.clientX,distY:i-n.clientY}}function L(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function X(e,t,n){return e.map((function(e,r){return _(e,t[r],n[r])}))}function Y(e){for(var t=Math.min(e.length,2),n=[],r=0;r<t;++r)n.push(F(e[r]));return n}function F(e){return{clientX:e.clientX,clientY:e.clientY}}function W(e){return{clientX:(e[0].clientX+e[1].clientX)/2,clientY:(e[0].clientY+e[1].clientY)/2}}function R(e,t){return{clientX:e.clientX+t.clientX,clientY:e.clientY+t.clientY}}function B(e,t){return{clientX:e.clientX-t.clientX,clientY:e.clientY-t.clientY}}var H=function(){function e(e,t){var n=this;void 0===t&&(t={}),this.el=e,this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.onDragStart=function(e){if(n.flag||!1!==e.cancelable){if(function(e){return e.touches&&e.touches.length>=2}(e)){if(!n.flag&&e.touches.length!==e.changedTouches.length)return;n.pinchFlag||n.onPinchStart(e)}if(!n.flag){var t=n.startClients[0]?n.startClients:z(e);n.flag=!0,n.isDrag=!1,n.startClients=t,n.prevClients=t,n.datas={},n.movement=0;var r=_(t[0],n.prevClients[0],n.startClients[0]),i=n.options,o=i.dragstart;(i.preventRightClick&&3===e.which||!1===(o&&o(K({datas:n.datas,inputEvent:e},r))))&&(n.startClients=[],n.prevClients=[],n.flag=!1),n.flag&&e.preventDefault()}}},this.onDrag=function(e){if(n.flag){var t=z(e);n.pinchFlag&&n.onPinch(e,t);var r=n.prevClients,i=n.startClients,o=n.pinchFlag?M(t,r,i,n.startPinchClients):_(t[0],r[0],i[0]),a=o.deltaX,s=o.deltaY;if(a||s){n.movement+=Math.sqrt(a*a+s*s),n.isDrag=!0;var l=n.options.drag;l&&l(K({datas:n.datas},o,{inputEvent:e})),n.prevClients=t}}},this.onDragEnd=function(e){if(n.flag){n.pinchFlag&&n.onPinchEnd(e),n.flag=!1;var t=n.options.dragend,r=n.prevClients,i=n.startClients,o=n.pinchFlag?M(r,r,i,n.startPinchClients):_(r[0],r[0],i[0]);n.startClients=[],n.prevClients=[],t&&t(K({datas:n.datas,isDrag:n.isDrag,inputEvent:e},o))}},this.options=K({container:e,preventRightClick:!0,pinchThreshold:0,events:["touch","mouse"]},t);var r=this.options,i=r.container,o=r.events;this.isTouch=o.indexOf("touch")>-1,this.isMouse=o.indexOf("mouse")>-1,this.isMouse&&(d(e,"mousedown",this.onDragStart),d(i,"mousemove",this.onDrag),d(i,"mouseup",this.onDragEnd)),this.isTouch&&(d(e,"touchstart",this.onDragStart),d(i,"touchmove",this.onDrag),d(i,"touchend",this.onDragEnd))}var t=e.prototype;return t.isDragging=function(){return this.isDrag},t.isPinching=function(){return this.isPinch},t.onPinchStart=function(e){var t,n,r=this.options,i=r.pinchstart,o=r.pinchThreshold;if(!(this.isDrag&&this.movement>o)){var a=Y(e.changedTouches);if(this.pinchFlag=!0,(t=this.startClients).push.apply(t,a),(n=this.prevClients).push.apply(n,a),this.startDistance=L(this.prevClients),this.startPinchClients=this.prevClients.slice(),i){var s=this.prevClients,l=W(s),c=_(l,l,l);i(K({datas:this.datas,touches:X(s,s,s)},c,{inputEvent:e}))}}},t.onPinch=function(e,t){if(this.flag&&this.pinchFlag){this.isPinch=!0;var n=this.options.pinch;if(n){var r=this.prevClients,i=this.startClients,o=_(W(t),W(r),W(i)),a=L(t);n(K({datas:this.datas,touches:X(t,r,i),scale:a/this.startDistance,distance:a},o,{inputEvent:e}))}}},t.onPinchEnd=function(e){if(this.flag&&this.pinchFlag){var t=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.options.pinchend;if(n){var r=this.prevClients,i=this.startClients,o=_(W(r),W(r),W(i));n(K({datas:this.datas,isPinch:t,touches:X(r,r,i)},o,{inputEvent:e})),this.isPinch=!1,this.pinchFlag=!1}}},t.unset=function(){var e=this.el,t=this.options.container;this.isMouse&&(h(e,"mousedown",this.onDragStart),h(t,"mousemove",this.onDrag),h(t,"mouseup",this.onDragEnd)),this.isTouch&&(h(e,"touchstart",this.onDragStart),h(t,"touchmove",this.onDrag),h(t,"touchend",this.onDragEnd))},e}();const U=H;function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}"undefined"==typeof window||Z(window),"undefined"!==("undefined"==typeof document?"undefined":Z(document))&&document;"undefined"==typeof window||q(window),"undefined"!==("undefined"==typeof document?"undefined":q(document))&&document;var V,$={transform:{},filter:{},attribute:{},html:!0},G="playSpeed";function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}!function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a]}(["id","iterationCount","delay","fillMode","direction",G,((V={})["animation-timing-function"]=!0,V.contents=!0,V.html=!0,"duration"),G,"iterationTime","playState"],["easing","easingName"]);var Q=function(e,t){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Q(e,t)};const ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){function n(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.shouldComponentUpdate=function(e,t){return t!==this.state||!function(e,t,n,r){var i=void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==J(e)||!e||"object"!==J(t)||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var p=e[c],u=t[c];if(!1===(i=void 0)||void 0===i&&p!==u)return!1}return!0}(e,this.props)},t}(e.Component);var te=function(e,t){return te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},te(e,t)},ne=function(){return ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ne.apply(this,arguments)};var re=function(e,t){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},re(e,t)};function ie(e,t){function n(){this.constructor=e}re(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var oe=function(){return oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oe.apply(this,arguments)},ae="scenejs-editor-",se=function(e,t){return'\n{\n    position: relative;\n    width: 100%;\n    font-size: 0;\n    background: #000;\n    display: flex;\n    flex-direction: column;\n}\n* {\n    font-family: sans-serif;\n    box-sizing: border-box;\n    color: #fff;\n}\n.header-area, .scroll-area {\n   width: 100%;\n   position: relative;\n  display: flex;\n  -webkit-align-items: flex-start;\n  align-items: flex-start;\n}\n.header-area {\n  position: relative;\n  z-index: 10;\n  top: 0;\n  height: 30px;\n  min-height: 30px;\n}\n.header-area .keyframes {\n  padding: 0px;\n}\n.header-area .properties-area,\n.header-area .keyframes-area,\n.header-area .values-area,\n.header-area .keyframes-scroll-area {\n    height: 100%;\n}\n.header-area .keyframes-scroll-area {\n    overflow: hidden;\n}\n.header-area .property, .header-area .value, .header-area .keyframes {\n  height: 100%;\n}\n.header-area .property {\n    line-height: 30px;\n}\n.value .add {\n    text-align: center;\n    color: #fff;\n    line-height: 30px;\n    font-weight: bold;\n    font-size: 20px;\n    cursor: pointer;\n}\n.header-area .keyframes-area::-webkit-scrollbar {\n    display: none;\n}\n.header-area .keyframe-cursor {\n    position: absolute;\n    border-top: 10px solid #4af;\n    border-left: 6px solid transparent;\n    border-right: 6px solid transparent;\n    width: 0;\n    height: 0;\n    bottom: 0;\n    top: auto;\n    background: none;\n    cursor: pointer;\n}\n.control-area .keyframes {\n    padding-left: 10px;\n}\n.play-control-area {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n.play-control-area .control {\n    position: relative;\n    display: inline-block;\n    vertical-align: middle;\n    color: white;\n    margin: 0px 15px;\n    cursor: pointer;\n}\n.play {\n    border-left: 14px solid white;\n    border-top: 8px solid transparent;\n    border-bottom: 8px solid transparent;\n}\n.pause {\n    border-left: 4px solid #fff;\n    border-right: 4px solid #fff;\n    width: 14px;\n    height: 16px;\n}\n.prev {\n    border-right: 10px solid white;\n    border-top: 6px solid transparent;\n    border-bottom: 6px solid transparent;\n}\n.prev:before {\n    position: absolute;\n    content: "";\n    width: 3px;\n    height: 10px;\n    top: 0;\n    right: 100%;\n    transform: translate(0, -50%);\n    background: white;\n}\n.next {\n    border-left: 10px solid white;\n    border-top: 6px solid transparent;\n    border-bottom: 6px solid transparent;\n}\n.next:before {\n    position: absolute;\n    content: "";\n    width: 3px;\n    height: 10px;\n    top: 0;\n    transform: translate(0, -50%);\n    background: white;\n}\n.keytime {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  font-size: 13px;\n  font-weight: bold;\n  color: #777;\n}\n.keytime:last-child {\n  max-width: 0px;\n}\n.keytime span {\n  position: absolute;\n  line-height: 1;\n  bottom: 12px;\n  display: inline-block;\n  transform: translate(-50%);\n  color: #eee;\n}\n.keytime .graduation {\n  position: absolute;\n  bottom: 0;\n  width: 1px;\n  height: 10px;\n  background: #666;\n  transform: translate(-50%);\n}\n.keytime .graduation.half {\n  left: 50%;\n  height: 7px;\n}\n.keytime .graduation.quarter {\n  left: 25%;\n  height: 5px;\n}\n.keytime .graduation.quarter3 {\n  left: 75%;\n  height: 5px;\n}\n.scroll-area {\n  position: relative;\n  width: 100%;\n  height: calc(100% - 60px);\n  overflow: auto;\n}\n.properties-area, .keyframes-area, .values-area {\n  display: inline-block;\n  position: relative;\n  font-size: 16px;\n  overflow: auto;\n}\n\n.properties-area::-webkit-scrollbar, .keyframes-area::-webkit-scrollbar {\n    display: none;\n}\n.properties-area {\n  width: 30%;\n  max-width: 200px;\n  box-sizing: border-box;\n}\n.values-area {\n    width: 50px;\n    min-width: 50px;\n    display: inline-block;\n    border-right: 1px solid #666;\n    box-sizing: border-box;\n}\n.value input {\n    appearance: none;\n    -webkit-appearance: none;\n    outline: none;\n    position: relative;\n    display: block;\n    width: 100%;\n    height: 100%;\n    background: transparent;\n    color: #4af;\n    font-weight: bold;\n    background: none;\n    border: 0;\n    box-sizing: border-box;\n    text-align: center;\n}\n.value {\n\n}\n:host.alt .value input {\n    cursor: ew-resize;\n}\n.value[data-object="1"] input {\n    display: none;\n}\n.properties-scroll-area {\n  display: inline-block;\n  min-width: 100%;\n}\n.keyframes-area {\n  flex: 1;\n}\n.keyframes-scroll-area {\n  position: relative;\n  min-width: 300px;\n}\n.keyframes, .property, .value {\n  position: relative;\n  height: 30px;\n  line-height: 30px;\n  border-bottom: 1px solid #555;\n  box-sizing: border-box;\n  white-space: nowrap;\n  background: rgba(90, 90, 90, 0.7);\n  z-index: 1;\n}\n\n.property {\n  padding-left: 10px;\n  box-sizing: border-box;\n  font-size: 13px;\n  font-weight: bold;\n  color: #eee;\n}\n.property .remove {\n    position: absolute;\n    display: inline-block;\n    cursor: pointer;\n    width: 18px;\n    height: 18px;\n    top: 0;\n    bottom: 0;\n    right: 10px;\n    margin: auto;\n    border-radius: 50%;\n    border: 2px solid #fff;\n    vertical-align: middle;\n    display: none;\n    margin-left: 10px;\n    box-sizing: border-box;\n}\n.property .remove:before, .property .remove:after {\n    position: absolute;\n    content: "";\n    width: 8px;\n    height: 2px;\n    border-radius: 1px;\n    background: #fff;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    margin: auto;\n}\n.property .remove:before {\n    transform: rotate(45deg);\n}\n.property .remove:after {\n    transform: rotate(-45deg);\n}\n.property:hover .remove {\n    display: inline-block;\n}\n\n[data-item="1"], [data-item="1"] .add {\n    height: 30px;\n    line-height: 30px;\n}\n.time-area {\n    position: absolute;\n    top: 0;\n    left: 10px;\n    font-size: 13px;\n    color: #4af;\n    line-height: 30px;\n    font-weight: bold;\n    height: 100%;\n    line-height: 30px;\n    border: 0;\n    background: transparent;\n    outline: 0;\n}\n.time-area:after {\n    content: "s";\n}\n.property .arrow {\n    position: relative;\n    display: inline-block;\n    width: 20px;\n    height: 25px;\n    cursor: pointer;\n    vertical-align: middle;\n}\n.property .arrow:after {\n    content: "";\n    position: absolute;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    margin: auto;\n    width: 0;\n    height: 0;\n    border-top: 6px solid #eee;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n}\n.property[data-fold="1"] .arrow:after {\n    border-top: 4px solid transparent;\n    border-bottom: 4px solid transparent;\n    border-right: 0;\n    border-left: 6px solid #eee;\n}\n.property[data-object="0"] .arrow {\n    display: none;\n}\n.property.fold, .keyframes.fold, .value.fold {\n    display: none;\n}\n.property.select, .value.select, .keyframes.select {\n    background: rgba(120, 120, 120, 0.7);\n}\n.keyframes {\n\n}\n.keyframe-delay {\n  position: absolute;\n  top: 3px;\n  bottom: 3px;\n  left: 0;\n  background: #4af;\n  opacity: 0.2;\n  z-index: 0;\n}\n.keyframe-group {\n    position: absolute;\n    top: 3px;\n    bottom: 3px;\n    left: 0;\n    background: #4af;\n    opacity: 0.6;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-left-color: rgba(255, 255, 255, 0.2);\n    border-top-color: rgba(255, 255, 255, 0.2);\n    z-index: 0;\n}\n.keyframe-line {\n  position: absolute;\n  height: 8px;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  background: #666;\n  z-index: 0;\n}\n.keyframe {\n  position: absolute;\n  font-size: 0px;\n  width: 12px;\n  height: 12px;\n  top: 0px;\n  bottom: 0px;\n  margin: auto;\n  background: #fff;\n  border: 2px solid #383838;\n  border-radius: 2px;\n  box-sizing: border-box;\n  transform: translate(-50%) rotate(45deg);\n  z-index: 1;\n  cursor: pointer;\n}\n.keyframe[data-no="1"] {\n    opacity: 0.2;\n}\n.select .keyframe {\n    border-color: #555;\n}\n.keyframe.select {\n    background: #4af;\n}\n.keyframes-container, .line-area {\n  position: relative;\n  width: calc(100% - 30px);\n  left: 15px;\n  height: 100%;\n}\n.line-area {\n  position: absolute;\n  top: 0;\n  z-index: 0;\n}\n.keyframe-cursor {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  background: #4af;\n  width: 1px;\n  height: 100%;\n  left: 15px;\n  transform: translate(-50%);\n}\n.scroll-area .keyframe-cursor {\n  pointer-events: none;\n}\n.division-line {\n  position: absolute;\n  background: #333;\n  width: 1px;\n  height: 100%;\n  transform: translate(-50%);\n}\n'.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")}(ae);function le(e,t,n){var r=(""+e).length,i=[];n&&i.push(e);for(var o=r;o<t;++o)i.push(0);return n||i.push(e),i.join("")}function ce(e){return p(e)?Array.isArray(e)?"["+e.join(", ")+"]":"{"+function(e){var t=[];for(var n in e)t.push(n);return t}(e).map((function(t){return t+": "+ce(e[t])})).join(", ")+"}":e}function pe(e,t){for(var n in void 0===t&&(t={}),e){var r=e[n];if(p(r)){var i=pe(de(r)?r.get():r);for(var o in i)t[n+"///"+o]=i[o]}else t[n]=r}return t}function ue(e,t){for(var n=e;n&&n!==document.body;){if(t(n))return n;n=n.parentNode}return null}function fe(e,t){return function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}(e,""+ae+t)}function me(e){return e&&!!e.constructor.prototype.getItem}function de(e){return e&&!!e.constructor.prototype.toCSS}function he(e,t){return m(e,(function(e){var n=e.getBoundingClientRect(),r=n.top,i=r+n.height;return r<=t&&t<i}))}function ye(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(void 0,[ae].concat(e))}function ve(e,t){var n=m(t,(function(n,r){return e[t.slice(0,r+1).join("///")+"///"]}));return n>-1?n===t.length-1?2:1:0}function ge(e,t,n){var r=t+"///",i=e.state.foldedInfo;i[r]=!i[r],n||e.setState({foldedInfo:oe({},i)})}var be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ie(t,e),t.prototype.getElement=function(){return this.element||(this.element=(0,y.findDOMNode)(this))},t}(e.PureComponent),xe=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}ie(n,t);var r=n.prototype;return r.render=function(){return(0,e.createElement)("input",{className:ye("time-area")})},r.componentDidMount=function(){var e=this;new j(this.getElement()).keydown((function(e){!e.isToggle&&e.inputEvent.stopPropagation()})).keyup((function(e){!e.isToggle&&e.inputEvent.stopPropagation()})).keyup("enter",(function(){var t=e.getElement().value,n=/(\d+):(\d+):(\d+)/g.exec(t);if(n){var r=60*parseFloat(n[1])+parseFloat(n[2])+parseFloat("0."+n[3]);e.props.timeline.setTime(r)}}))},n}(be),ke=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={isPlay:!1},e.play=function(){e.setState({isPlay:!0})},e.pause=function(){e.setState({isPlay:!1})},e.togglePlay=function(){e.props.timeline.togglePlay()},e.prev=function(){e.props.timeline.prev()},e.next=function(){e.props.timeline.next()},e.unselect=function(){e.props.timeline.select("",-1)},e}ie(n,t);var r=n.prototype;return r.render=function(){var t=this.props.timeline;return(0,e.createElement)("div",{className:ye("control-area header-area")},(0,e.createElement)("div",{className:ye("properties-area"),onClick:this.unselect},(0,e.createElement)("div",{className:ye("property")})),(0,e.createElement)("div",{className:ye("values-area")},(0,e.createElement)("div",{className:ye("value")})),(0,e.createElement)("div",{className:ye("keyframes-area")},(0,e.createElement)("div",{className:ye("keyframes")},(0,e.createElement)(xe,{ref:i(this,"timeArea"),timeline:t}),(0,e.createElement)("div",{className:ye("play-control-area")},(0,e.createElement)("div",{className:ye("control prev"),onClick:this.prev}),(0,e.createElement)("div",{className:ye("control "+(this.state.isPlay?"pause":"play")),onClick:this.togglePlay}),(0,e.createElement)("div",{className:ye("control next"),onClick:this.next})))))},r.componentDidMount=function(){this.initScene(this.props.scene)},r.componentDidUpdate=function(e){e.scene!==this.props.scene&&(this.initScene(this.props.scene),this.releaseScene(e.scene))},r.componentWillUnmount=function(){this.releaseScene(this.props.scene)},r.initScene=function(e){e&&e.on({play:this.play,paused:this.pause})},r.releaseScene=function(e){e&&(e.off("play",this.play),e.off("paused",this.pause))},n}(be),Ee=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ie(n,t),n.prototype.render=function(){return(0,e.createElement)("div",{className:ye("keyframe-cursor")})},n}(be),we=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.onWheel=function(t){var n=e.props.timeline,r=t.deltaY;n.setZoom(n.getZoom()+r/5e3),!t.deltaX&&t.preventDefault()},e}ie(n,t);var r=n.prototype;return r.renderKeytimes=function(){for(var t=this.props.maxTime,n=[],r=0;r<=t;++r)n.push((0,e.createElement)("div",{key:r,"data-time":r,className:ye("keytime"),style:{width:100/t+"%"}},(0,e.createElement)("span",null,r),(0,e.createElement)("div",{className:ye("graduation start")}),(0,e.createElement)("div",{className:ye("graduation quarter")}),(0,e.createElement)("div",{className:ye("graduation half")}),(0,e.createElement)("div",{className:ye("graduation quarter3")})));return n},r.render=function(){var t=this.props,n=t.maxTime,r=t.maxDuration,o=t.zoom;return(0,e.createElement)("div",{className:ye("keytimes-area keyframes-area")},(0,e.createElement)("div",{className:ye("keyframes-scroll-area"),ref:i(this,"scrollAreaElement"),style:{minWidth:50*n+"px",width:Math.min(r?n/r:1,2)*o*100+"%"}},(0,e.createElement)("div",{className:ye("keytimes keyframes")},(0,e.createElement)("div",{className:ye("keyframes-container")},this.renderKeytimes()),(0,e.createElement)(Ee,{ref:i(this,"cursor")}))))},r.componentDidMount=function(){var e=this;d(this.getElement(),"wheel",this.onWheel),this.dragger=new U(this.cursor.getElement(),{dragstart:function(e){e.inputEvent.stopPropagation()},drag:function(t){var n=t.clientX;e.props.timeline.move(n)},container:window})},r.componentWillUnmount=function(){h(this.getElement(),"wheel",this.onWheel),this.dragger.unset()},n}(be),Te=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.openDialog=function(){e.props.timeline.openDialog()},e}return ie(n,t),n.prototype.render=function(){var t=this.props,n=t.timelineInfo,r=t.maxTime,o=t.maxDuration,a=t.zoom,s=t.timeline;return(0,e.createElement)("div",{className:ye("header-area")},(0,e.createElement)("div",{className:ye("properties-area")},(0,e.createElement)("div",{className:ye("property")},"Name")),(0,e.createElement)("div",{className:ye("values-area")},(0,e.createElement)("div",{className:ye("value")},(0,e.createElement)("div",{className:ye("add"),onClick:this.openDialog},"+"))),(0,e.createElement)(we,{ref:i(this,"keytimesArea"),timeline:s,timelineInfo:n,maxDuration:o,maxTime:r,zoom:a}))},n}(be),Se=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ie(n,t),n.prototype.render=function(){var t=this.props,n=t.time,r=t.value,i=t.maxTime,o=t.selected;return(0,e.createElement)("div",{className:ye("keyframe"+(o?" select":"")),"data-time":n,style:{left:n/i*100+"%"}},n," ",r)},n}(be),Pe=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ie(n,t),n.prototype.render=function(){var t=this.props,n=t.time,r=t.nextTime,i=t.maxTime,o=t.selected;return(0,e.createElement)("div",{className:ye("keyframe-group"+(o?" select":"")),"data-time":n,style:{left:n/i*100+"%",width:(r-n)/i*100+"%"}})},n}(e.PureComponent),Ae=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ie(n,t),n.prototype.render=function(){var t=this.props,n=t.time,r=t.nextTime,i=t.maxTime;return(0,e.createElement)("div",{className:ye("keyframe-delay"),style:{left:n/i*100+"%",width:(r-n)/i*100+"%"}})},n}(e.PureComponent),Ce=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ie(n,t),n.prototype.render=function(){var t=this.props,n=t.time,r=t.nextTime,i=t.maxTime;return(0,e.createElement)("div",{className:ye("keyframe-line"),style:{left:n/i*100+"%",width:(r-n)/i*100+"%"}})},n}(e.PureComponent),De=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}ie(n,t);var r=n.prototype;return r.render=function(){var t=this.props,n=t.id,r=t.propertiesInfo,i=t.selected,o=t.folded;return(0,e.createElement)("div",{className:ye("keyframes"+(1===o?" fold":"")+(i?" select":"")),"data-item":r.isItem?"1":"0","data-id":n},(0,e.createElement)("div",{className:ye("keyframes-container")},this.renderList()))},r.renderList=function(){var t=this.props,n=t.propertiesInfo,r=t.maxTime,i=t.selected,o=t.selectedTime,a=n.item,s=n.frames,l=n.properties,p=me(a),u=a.getDuration(),f=[],d=[],h=[],y=[],v=s.length,g=l.length,b=0;if(v>=2&&!g){for(var x=0,k=1;k<v;++k){var E=s[k][1];if(s[k-1][1]!==E||0!==E&&E!==u)break;x=k}var w=m(s,(function(e){return!c(e[2])}));b=Math.min(v-2,Math.max(x,w));var T=s[b],S=s[v-1],P=T[0],A=S[0];d.push((0,e.createElement)(Pe,{key:"group",selected:i&&P<=o&&o<=A,time:P,nextTime:A,maxTime:r}))}return s.forEach((function(t,n){var a=t[0],l=t[1],m=t[2],d=ce(m);if(s[n+1]){var v=s[n+1],x=v[0],k=v[1];(0===l&&0===k||l===u&&k===u)&&h.push((0,e.createElement)(Ae,{key:"delay"+a+","+x,id:"-1",time:a,nextTime:x,maxTime:r}))}if(0!==n||0!==a||0!==l||!c(m)||g){if(s[n+1]){var E=s[n+1],w=(x=E[0],E[2]),T=ce(w);p||c(m)||c(w)||d===T||!g||y.push((0,e.createElement)(Ce,{key:"line"+y.length,time:a,id:a+","+x,nextTime:x,maxTime:r}))}p||n<b||f.push((0,e.createElement)(Se,{key:"keyframe"+n,selected:i&&a===o,time:a,value:d,maxTime:r}))}})),d.concat(f,h,y)},n}(be),Ie=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ie(n,t),n.prototype.render=function(){for(var t=this.props.maxTime,n=[],r=0;r<=t;++r)n.push((0,e.createElement)("div",{key:r,className:ye("division-line"),style:{left:100/t*r+"%"}}));return(0,e.createElement)("div",{className:ye("line-area")},n)},n}(e.PureComponent),Oe=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.keyframesList=[],e.state={foldedInfo:{}},e.onWheel=function(t){if(j.global.altKey){t.preventDefault();var n=t.deltaY,r=e.props.timeline;r.setZoom(r.getZoom()+n/5e3)}},e}return ie(n,t),n.prototype.render=function(){var t=this.props,n=t.timelineInfo,r=t.maxTime,a=t.maxDuration,s=t.zoom,l=t.selectedProperty,c=t.selectedTime,p=this.state.foldedInfo,u=Math.min(a?r/a:1,2),f=[];for(var m in this.keyframesList=[],n){var d=n[m],h=m===l,y=ve(p,d.keys);f.push((0,e.createElement)(De,{ref:o(this,"keyframesList",f.length),selected:h,folded:y,selectedTime:c,key:m,id:m,propertiesInfo:d,maxTime:r}))}return(0,e.createElement)("div",{className:ye("keyframes-area"),onWheel:this.onWheel},(0,e.createElement)("div",{className:ye("keyframes-scroll-area"),ref:i(this,"scrollAreaElement"),style:{minWidth:50*r+"px",width:u*s*100+"%"}},f.concat([(0,e.createElement)(Ee,{key:"cursor",ref:i(this,"cursor")}),(0,e.createElement)(Ie,{maxTime:r,key:"lines"})])))},n}(be),Ne=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.onClick=function(t){var n=t.target;if(fe(n,"arrow"))e.onClickArrow();else if(fe(n,"remove"))e.onClickRemove();else{var r=e.props,i=r.timeline,o=r.id;i.select(o)}},e.onClickArrow=function(){var t=e.props,n=t.id,r=t.timeline,i=t.scrollArea,o=t.index;r.select(n),i.fold(o)},e.onClickRemove=function(){var t=e.props,n=t.propertiesInfo,r=t.timeline,i=n.isItem,o=n.parentItem,a=n.item,s=n.properties;if(i){var l=null;o.forEach((function(e,t){e!==a||(l=t)})),null!=l&&o.removeItem(l)}else a.times.forEach((function(e){var t;(t=a).remove.apply(t,[e].concat(s))}));r.select("",-1,!0),r.update()},e}return ie(n,t),n.prototype.render=function(){var t=this.props,n=t.id,r=t.selected,i=t.folded,o=t.propertiesInfo,a=o.keys,s=o.isItem,l=o.isParent,c=a.length,p=a[c-1];return(0,e.createElement)("div",{className:ye("property"+(1===i?" fold":"")+(r?" select":"")),onClick:this.onClick,"data-id":n,"data-name":p,"data-object":l?1:0,"data-item":s?1:0,"data-fold":2===i?1:0,style:{paddingLeft:10+20*(c-1)+"px"}},(0,e.createElement)("div",{className:ye("arrow")}),(0,e.createElement)("span",null,p),(0,e.createElement)("div",{className:ye("remove")}))},n}(be),je=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.properties=[],e.state={foldedInfo:{}},e}return ie(n,t),n.prototype.render=function(){var t=this.props,n=t.timelineInfo,r=t.selectedProperty,i=t.timeline,a=t.scrollArea,s=this.state.foldedInfo,l=[];this.properties=[];var c=-1;for(var p in n){var u=n[p],f=r===p,m=ve(s,u.keys);++c,l.push((0,e.createElement)(Ne,{ref:o(this,"properties",c),timeline:i,scrollArea:a,selected:f,folded:m,key:p,id:p,index:c,propertiesInfo:u}))}return(0,e.createElement)("div",{className:ye("properties-area")},(0,e.createElement)("div",{className:ye("properties-scroll-area")},l))},n}(be),Ke=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.add=function(){var t=e.props,n=t.propertiesInfo,r=n.item,i=n.properties;t.timeline.openDialog(r,i)},e}ie(n,t);var r=n.prototype;return r.render=function(){var t=this.props,n=t.id,r=t.selected,i=t.folded,o=t.propertiesInfo,a=o.isItem,s=o.isParent;return(0,e.createElement)("div",{className:ye("value"+(1===i?" fold":"")+(r?" select":"")),"data-id":n,"data-object":s?1:0,"data-item":a?1:0},this.renderValue())},r.renderValue=function(){return this.props.propertiesInfo.isParent?(0,e.createElement)("div",{className:ye("add"),onClick:this.add},"+"):(0,e.createElement)("input",{ref:i(this,"inputElement")})},n}(be),Me=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.values=[],e.state={foldedInfo:{}},e}ie(n,t);var r=n.prototype;return r.render=function(){var t=this.props,n=t.timelineInfo,r=t.selectedProperty,i=t.timeline,a=this.state.foldedInfo,s=[];for(var l in this.values=[],n){var c=n[l],p=r===l,u=ve(a,c.keys);s.push((0,e.createElement)(Ke,{ref:o(this,"values",s.length),timeline:i,key:l,folded:u,selected:p,id:l,propertiesInfo:c}))}return(0,e.createElement)("div",{className:ye("values-area")},s)},r.componentDidMount=function(){var e,t,n=this,r=this.getElement();r.addEventListener("focusout",(function(e){n.props.timeline.setTime()})),this.dragger=new U(r,{container:window,dragstart:function(n){if(e=n.inputEvent.target,t=e.value,!j.global.altKey||!ue(e,(function(e){return"INPUT"===e.nodeName})))return!1},drag:function(n){var r=t.replace(/-?\d+/g,(function(e){return""+(parseFloat(e)+Math.round(n.distX/2))}));e.value=r},dragend:function(t){n.edit(e,e.value)}}),this.keycon=new j(r).keydown((function(e){!e.isToggle&&e.inputEvent.stopPropagation()})).keyup((function(e){!e.isToggle&&e.inputEvent.stopPropagation()})).keyup("enter",(function(e){var t=e.inputEvent.target;n.edit(t,t.value)})).keyup("esc",(function(e){e.inputEvent.target.blur()}))},r.componentWillUnmount=function(){this.dragger.unset(),this.keycon.off()},r.edit=function(e,t){var n=ue(e,(function(e){return fe(e,"value")}));if(n){var r=m(this.values,(function(e){return e.getElement()===n}));-1!==r&&this.props.timeline.editKeyframe(r,t)}},n}(be),ze=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}ie(n,t);var r=n.prototype;return r.render=function(){var t=this.props,n=t.zoom,r=t.maxDuration,o=t.maxTime,a=t.timelineInfo,s=t.selectedProperty,l=t.selectedTime,c=t.timeline;return(0,e.createElement)("div",{className:ye("scroll-area")},(0,e.createElement)(je,{ref:i(this,"propertiesArea"),timeline:c,scrollArea:this,timelineInfo:a,selectedProperty:s}),(0,e.createElement)(Me,{ref:i(this,"valuesArea"),timeline:c,timelineInfo:a,selectedProperty:s}),(0,e.createElement)(Oe,{ref:i(this,"keyframesArea"),timeline:c,zoom:n,maxDuration:r,timelineInfo:a,maxTime:o,selectedProperty:s,selectedTime:l}))},r.componentDidMount=function(){this.foldAll()},r.foldAll=function(){var e=this;this.propertiesArea.properties.forEach((function(t,n){t.props.propertiesInfo.isParent&&e.fold(n)}))},r.fold=function(e,t){var n=this.propertiesArea.properties[e].props.id;ge(this.propertiesArea,n,t),ge(this.valuesArea,n,t),ge(this.keyframesArea,n,t)},n}(be),_e=0,Le=-1,Xe=-1,Ye=1e6;function Fe(e){return Math.round(e*Ye)/Ye}function We(e,t,n){var r=e[e.length-1];(!r||r[0]!==t||r[1]!==n)&&e.push([Fe(t),Fe(n)])}function Re(e,t){var n=m(t,(function(e){return"infinite"===e.iterationCount}),t.length-1)+1;return function(e,t){if(!e.length)return[];var n=e.map((function(e){return[e,e]})),r=[];return 0!==n[0][0]&&t[t.length-1].delay&&n.unshift([0,0]),t.forEach((function(e){for(var t,i,o=e.iterationCount,a=e.delay,s=e.playSpeed,l=e.direction,c=Math.ceil(o),p=n[n.length-1][0],u=n.length,f=p*o,m=0;m<c;++m)for(var d="reverse"===l||"alternate"===l&&m%2||"alternate-reverse"===l&&!(m%2),h=0;h<u;++h){var y=n[d?u-h-1:h],v=y[1],g=p*m+(d?p-y[0]:y[0]),b=n[d?u-h:h-1];if(g>f){if(0!==h){var x=p*m+(d?p-b[0]:b[0]),k=(b[1]*(i=g-f)+v*(t=f-x))/(t+i);We(r,(a+p*o)/s,k)}break}if(g===f&&r.length&&r[r.length-1][0]===f+a)break;We(r,(a+g)/s,v)}a&&r.unshift([0,r[0][1]]),n=r,r=[]})),n}(e,t.slice(0,n))}function Be(e,t,n,r){r.update();var i=r.times.slice(),o=r.getDuration();!r.getFrame(0)&&i.unshift(0),!r.getFrame(o)&&i.push(o);var a=Re(i,t.slice(1).map((function(e){return e.state})).reverse()),s=t[t.length-2];!function t(i){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];var u=[],f=p(i),m=0===o.length;a.forEach((function(e){var t=e[0],n=e[1],i=r.get.apply(r,[n].concat(o));c(i)&&o.length||u.push([t,n,i])}));var d=n.concat(o),h=d.join("///");if(h&&(e[h]={key:h,keys:d,parentItem:s,isParent:f,isItem:m,item:r,names:n,properties:o,frames:u}),f)for(var y in i)t.apply(void 0,[i[y]].concat(o,[y]))}(r.names)}function He(e){var t={};return function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=n.length,o=n[i-1],a=n.slice(1).map((function(e){return e.getId()}));if(me(o)){if(a.length){var s=a.join("///"),l=[0,o.getDuration()],c=Re(l,n.slice(1).map((function(e){return e.state})).reverse()),p=[];c.forEach((function(e){var t=e[0],n=e[1];p.push([t,n,n])})),t[s]={key:s,keys:a,isItem:!0,isParent:!0,parentItem:n[i-2],item:o,names:[],properties:[],frames:p}}o.forEach((function(t){e.apply(void 0,n.concat([t]))}))}else Be(t,n,a,o)}(e),t}var Ue,Ze,qe,Ve,$e,Ge=(Ue="div",Ve="rCS"+function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}(Ze=se).toString(36),$e=0,function(t){function n(e){return t.call(this,e)||this}return function(e,t){function n(){this.constructor=e}te(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,t),n.prototype.render=function(){var t=this.props,n=t.className,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["className"]);return(0,e.createElement)(Ue,ne({className:n+" "+Ve},r))},n.prototype.componentDidMount=function(){0===$e&&(qe=function(e,t){var n=document.createElement("style");return n.setAttribute("type","text/css"),n.innerHTML=t.replace(/([^}{]*){/gm,(function(t,n){return f(n).map((function(t){return t.indexOf(":global")>-1?t.replace(/\:global/g,""):t.indexOf(":host")>-1?""+t.replace(/\:host/g,"."+e):"."+e+" "+t})).join(", ")+"{"})),(document.head||document.body).appendChild(n),n}(Ve,Ze)),++$e},n.prototype.componentWillUnmount=function(){0==--$e&&qe&&qe.parentNode.removeChild(qe)},n.prototype.getElement=function(){return this.element||(this.element=(0,y.findDOMNode)(this))},n}(e.Component)),Je=function(t){function n(e){var n=t.call(this,e)||this;return n.values={},n.state={alt:!1,zoom:1,maxDuration:0,maxTime:0,timelineInfo:{},selectedProperty:"",selectedTime:-1,selectedItem:null,init:!1,updateTime:!1},n.keyMap={keydown:{alt:function(){n.setState({alt:!0})},space:function(e){e.inputEvent.preventDefault()},left:function(){n.prev()},right:function(){n.context()}},keyup:{alt:function(){n.setState({alt:!1})},esc:function(){n.finish()},backspace:function(){n.removeKeyframe(n.state.selectedProperty)},space:function(){n.togglePlay()}}},n.update=function(e){void 0===e&&(e=!1);var t=n.props.scene;if(t){var r=Math.ceil(t.getDuration()),i=Math.max(n.state.maxTime,r),o=n.state.maxTime,a=n.state.zoom,s=o>1?i/o:1,l=Math.max(1,a*s);n.setState({timelineInfo:He(t),maxTime:i,maxDuration:r,updateTime:!0,init:e,zoom:l})}},n.prev=function(){var e=n.props.scene;e&&n.setTime(e.getTime()-.05)},n.finish=function(){var e=n.props.scene;e&&e.finish()},n.togglePlay=function(){var e=n.props.scene;e&&("running"===e.getPlayState()?e.pause():e.play())},n.getDistTime=function(e,t){void 0===t&&(t=n.scrollArea.keyframesArea.scrollAreaElement.getBoundingClientRect());var r=t.width-30,i=Math.min(r,e)/r,o=n.state.maxTime*i;return Math.round(20*o)/20},n.getTime=function(e){var t=n.scrollArea.keyframesArea.scrollAreaElement.getBoundingClientRect(),r=t.left+15,i=Math.max(e-r,0);return n.getDistTime(i,t)},n.animate=function(e){var t=e.time,r=le(Math.floor(t/60),2),i=le(Math.floor(t%60),2),o=le(Math.floor(t%1*100),3,!0);n.moveCursor(t),n.setInputs(pe(e.frames||e.frame.get())),n.controlArea.timeArea.getElement().value=r+":"+i+":"+o},n.onBlur=function(){!0===n.state.alt&&n.setState({alt:!1})},n.state=oe({},n.state,n.initScene(n.props.scene,!1)),n}ie(n,t);var r=n.prototype;return r.render=function(){var t=this.props,n=t.scene,r=t.className,o=(t.keyboard,t.onSelect,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}(t,["scene","className","keyboard","onSelect"])),a=this.state,s=a.zoom,l=a.alt,c=a.maxDuration,p=a.maxTime,u=a.timelineInfo,f=a.selectedProperty,m=a.selectedTime;return(0,e.createElement)(Ge,oe({className:ye("timeline"+(l?" alt":""))+(r?" "+r:"")},o),(0,e.createElement)(ke,{ref:i(this,"controlArea"),scene:n,timeline:this}),(0,e.createElement)(Te,{ref:i(this,"headerArea"),timeline:this,maxDuration:c,zoom:s,maxTime:p,timelineInfo:u}),(0,e.createElement)(ze,{ref:i(this,"scrollArea"),timeline:this,maxDuration:c,zoom:s,maxTime:p,selectedProperty:f,selectedTime:m,timelineInfo:u}))},r.componentDidMount=function(){this.initWheelZoom(),this.initScroll(),this.initDragKeyframes(),this.initKeyController()},r.componentDidUpdate=function(e){var t=this.props.scene,n=this.state;n.init&&(n.init=!1,this.scrollArea.foldAll()),e.scene!==t&&(this.releaseScene(e.scene),this.setState(this.initScene(t,!0))),n.updateTime&&(n.updateTime=!1,this.setTime())},r.componentWillUnmount=function(){this.draggers.forEach((function(e){e.unset()})),this.pinchDragger.unset();var e=j.global,t=this.keyMap,n=t.keydown,r=t.keyup;h(window,"blur",this.onBlur),e.offKeydown("alt",n.alt).offKeyup("alt",r.alt),this.props.keyboard&&e.offKeydown("space",n.space).offKeydown("left",n.left).offKeydown("right",n.right).offKeyup("backspace",r.backspace).offKeyup("esc",r.esc).offKeyup("space",r.space)},r.next=function(){var e=this.props.scene;e&&this.setTime(e.getTime()+.05)},r.selectItem=function(e){var t=this.state,n=t.timelineInfo,r=t.selectedTime;for(var i in n){var o=n[i];if(o.item===e){this.select(o.key,r);break}}},r.select=function(e,t,n){void 0===t&&(t=-1);var r=document.activeElement;r&&r.blur&&r.blur();var i=this.props.scene;if(i){i.pause();var o=this.state,a=o.selectedProperty,s=o.selectedTime,l=o.selectedItem,c=o.timelineInfo[e],p=e?c.item:this.props.scene,u=e?c.names.join("///"):"";this.props.onSelect&&this.props.onSelect({selectedItem:p,selectedName:u,selectedProperty:e,selectedTime:t,prevSelectedProperty:a,prevSelectedTime:s,prevSelectedItem:l}),n?(o.selectedProperty=e,o.selectedTime=t,o.selectedItem=p):this.setState({selectedProperty:e,selectedTime:t,selectedItem:p})}},r.editKeyframe=function(e,t){var n=this.scrollArea.propertiesArea.properties[e].props.propertiesInfo;if(!n.isParent){var r=n.item,i=n.properties;r.set.apply(r,[r.getIterationTime()].concat(i,[t])),this.update()}},r.setTime=function(e){var t=this.props.scene;if(t){var n=t.getDirection();t.pause(),c(e)&&(e=t.getTime()),"normal"===n||"alternate"===n?t.setTime(e):t.setTime(t.getDuration()-e)}},r.setZoom=function(e){this.setState({zoom:Math.max(e,1)})},r.getZoom=function(){return this.state.zoom},r.getValues=function(){return this.values},r.openDialog=function(e,t){void 0===e&&(e=this.props.scene),void 0===t&&(t=[]),this.props.scene&&(me(e)?this.newItem(e):this.newProperty(e,t))},r.move=function(e){this.setTime(this.getTime(e))},r.newItem=function(e){var t=prompt("Add Item");t&&(e.newItem(t),this.update())},r.newProperty=function(e,t){var n=prompt("Add Property");if(n){var r=$,i=t.concat([n]),o=i.every((function(e){return!!p(r[e])&&(r=r[e],!0)}));e.set.apply(e,[e.getIterationTime()].concat(i,[o?{}:""])),this.update()}},r.moveCursor=function(e){var t=this.state.maxTime,n="calc("+100*e/t+"% + "+(15-30*e/t)+"px)";this.scrollArea.keyframesArea.cursor.getElement().style.left=n,this.headerArea.keytimesArea.cursor.getElement().style.left=n},r.setInputs=function(e){this.values=e;var t=this.scrollArea.valuesArea.getElement();for(var n in e){var r=t.querySelector('[data-id="'+n+'"] input');r&&(r.value=e[n])}},r.removeKeyframe=function(e){var t=this.state.timelineInfo[e];if(e&&t&&!me(t.item)){var n=t.properties,r=t.item;r.remove.apply(r,[r.getIterationTime()].concat(n)),this.update()}},r.addKeyframe=function(e,t){var n=this.scrollArea.keyframesArea.keyframesList[e].props.id;this.select(n,t);var r=this.scrollArea.valuesArea.values[e].inputElement;r&&this.editKeyframe(e,r.value)},r.initScene=function(e,t){if(!e)return{timelineInfo:{},maxTime:0,maxDuration:0,zoom:1,init:!1};e.finish(),e.on("animate",this.animate);var n=Math.ceil(e.getDuration());return{timelineInfo:He(e),maxTime:n,maxDuration:n,zoom:1,init:t||!1}},r.releaseScene=function(e){e&&e.off("animate",this.animate)},r.initWheelZoom=function(){var e=this,t=this.scrollArea.keyframesArea.getElement();this.pinchDragger=new U(t,{pinchstart:function(t){t.datas.zoom=e.state.zoom},pinch:function(t){var n=t.scale,r=t.datas;console.log("SCALE",n),e.setZoom(r.zoom*n)}})},r.initScroll=function(){var e=!1,t=this.headerArea.keytimesArea.getElement(),n=this.scrollArea.keyframesArea.getElement();t.addEventListener("scroll",(function(){e?e=!1:(e=!0,n.scrollLeft=t.scrollLeft)})),n.addEventListener("scroll",(function(r){e?e=!1:(e=!0,t.scrollLeft=n.scrollLeft)}))},r.selectByKeyframe=function(e){var t=e.parentElement.parentElement,n=parseFloat(e.getAttribute("data-time")||"0"),r=t.getAttribute("data-id")||"";this.setTime(n),this.select(r,n)},r.initDragKeyframes=function(){var e,t,n=this,r=function(e,t,r){var i=he(n.scrollArea.keyframesArea.keyframesList.map((function(e){return e.getElement()})),r);-1!==i&&n.addKeyframe(i,n.getTime(t))},i=this.headerArea.keytimesArea.scrollAreaElement,o=this.scrollArea.keyframesArea.scrollAreaElement,a=0;this.draggers=[i,o].map((function(i){return new U(i,{container:window,dragstart:function(r){r.clientX;var i,o,s=r.inputEvent.target,l=ue(s,(function(e){return fe(e,"keyframe")}));if(l)return n.selectByKeyframe(l),!1;if(t=ue(s,(function(e){return fe(e,"keyframe-group")}))){var c=n.scrollArea.propertiesArea.properties,p=ue(t,(function(e){return fe(e,"keyframes")})).getAttribute("data-id"),u=((o=m(i=c,(function(e){return e.props.id===p})))>-1?i[o]:undefined).props.propertiesInfo;e=u.item,a=e.getDelay()}},drag:function(r){var i=r.distX,o=r.deltaX,s=r.deltaY,l=r.inputEvent;if(t&&e){var c=Math.max(a+n.getDistTime(i),0);e.getDelay()!==c&&(e.setDelay(c),n.update())}else n.scrollArea.keyframesArea.getElement().scrollLeft-=o,n.scrollArea.getElement().scrollTop-=s,l.preventDefault()},dragend:function(i){var o=i.isDrag,s=i.clientX,l=i.clientY,c=i.inputEvent;t=null,e=null,a=0,!o&&function(e,t,r){var i=n.getTime(t),o=n.scrollArea.keyframesArea.keyframesList,a=he(o.map((function(e){return e.getElement()})),r);n.setTime(i),a>-1&&n.select(o[a].props.id,i),e.preventDefault()}(c,s,l),function(e,t,n,r,i){var o=Date.now?Date.now():(new Date).getTime();e||(Le===n&&Xe===r&&o-_e<=500&&i(t,n,r),Le=n,Xe=r,_e=o)}(o,c,s,l,r)}})}))},r.initKeyController=function(){d(window,"blur",this.onBlur);var e=j.global,t=this.keyMap,n=t.keydown,r=t.keyup;e.keydown("alt",n.alt).keyup("alt",r.alt),this.props.keyboard&&e.keydown("space",n.space).keydown("left",n.left).keydown("right",n.right).keyup("backspace",r.backspace).keyup("esc",r.esc).keyup("space",r.space)},n.defaultProps={keyboard:!0,onSelect:function(){}},n}(ee);const Qe=Je})(),r})()));